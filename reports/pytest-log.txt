2025-03-14 16:08:34 - INFO - main - Contexto base iniciado
2025-03-14 16:08:34 - INFO - main - Usando base de datos de testing: C:\Users\pepec\Projects\Split_Sheet\tests\test.db
2025-03-14 16:08:34 - INFO - main - Modelos registrados: ['User', 'Agreement', 'Document']
2025-03-14 16:08:34 - INFO - main - Tablas creadas: ['user', 'participants', 'agreement', 'document']
2025-03-14 16:08:34 - INFO - main - Test 'test_register' iniciando con: {'app_contexts': 1, 'request_contexts': 0, 'base_app': <Flask 'main'>}
2025-03-14 16:08:34 - INFO - main - Estado inicial de sesión: {'is_active': True, 'in_transaction': True, 'has_changes': False}
2025-03-14 16:08:34 - DEBUG - main - Estado de sesión: {'new_objects': 0, 'dirty_objects': 0, 'deleted_objects': 0, 'in_transaction': True, 'is_active': True, 'has_transaction': True}
2025-03-14 16:08:34 - INFO - main - Estado inicial SQLAlchemy: {'new_objects': 0, 'dirty_objects': 0, 'deleted_objects': 0, 'in_transaction': True, 'is_active': True, 'has_transaction': True}
2025-03-14 16:08:34 - DEBUG - main - Estado de sesión: {'new_objects': 0, 'dirty_objects': 0, 'deleted_objects': 0, 'in_transaction': True, 'is_active': True, 'has_transaction': True}
2025-03-14 16:08:34 - INFO - main - Estado final SQLAlchemy: {'new_objects': 0, 'dirty_objects': 0, 'deleted_objects': 0, 'in_transaction': True, 'is_active': True, 'has_transaction': True}
2025-03-14 16:08:34 - WARNING - main - Detectada transacción activa, intentando limpiar...
2025-03-14 16:08:34 - DEBUG - main - Estado pre-cleanup: {'is_active': True, 'in_transaction': True, 'transaction_parent': False, 'new_objects': 0, 'dirty_objects': 0, 'deleted_objects': 0}
2025-03-14 16:08:34 - DEBUG - main - Limpieza radical completada
2025-03-14 16:08:34 - DEBUG - main - Estado de sesión: {'new_objects': 0, 'dirty_objects': 0, 'deleted_objects': 0, 'in_transaction': True, 'is_active': True, 'has_transaction': True}
2025-03-14 16:08:34 - INFO - main - Estado post-limpieza: {'new_objects': 0, 'dirty_objects': 0, 'deleted_objects': 0, 'in_transaction': True, 'is_active': True, 'has_transaction': True}
2025-03-14 16:08:34 - INFO - main - Estado final de sesión: {'is_active': True, 'in_transaction': True, 'has_changes': False}
2025-03-14 16:08:34 - WARNING - main - Sesión activa o con cambios detectada, limpiando...
2025-03-14 16:08:34 - ERROR - main - Test 'test_register' tiene fuga de request context
2025-03-14 16:08:34 - WARNING - main - Estado de contextos cambió durante limpieza: inicial={'app_contexts': 1, 'request_contexts': 1, 'base_app': <Flask 'main'>}, final={'app_contexts': 1, 'request_contexts': 0, 'base_app': <Flask 'main'>}
2025-03-14 16:08:34 - INFO - main - Base de datos de testing limpiada y eliminada
2025-03-14 16:08:34 - INFO - main - Limpiando contexto base
